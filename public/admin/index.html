<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8" />
    <meta name="robots" content="noindex" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Decap Admin</title>
  </head>
  <body>
    <!-- Tek bir CDN. Çift yükleme beyaz ekran/“removeChild” hatası yapar -->
    <script src="https://unpkg.com/decap-cms@3.0.10/dist/decap-cms.js"></script>

    <script>
      // Eski/yanlış cache’i patlat
      localStorage.removeItem('netlify-cms-user');

      // Panelin config.yml'i dosyadan okumasını ve cache kullanmamasını garantile
      window.CMS_MANUAL_INIT = true;
      fetch('config.yml', { cache: 'no-store' })
        .then(() => {
          CMS.init({ config: { load_config_file: true } });
        })
        .catch((e) => {
          document.body.innerHTML = '<pre>config.yml okunamadı: ' + e + '</pre>';
        });
    </script>
  </body>
</html>
